# Vercel 로그가 안 보일 때 체크리스트

## ✅ 1단계: 배포 상태 확인

### 1.1 배포가 완료되었는지 확인
- [ ] Vercel 대시보드 → 프로젝트 → **Deployments** 탭
- [ ] 최신 배포가 **"Ready"** 상태인지 확인
- [ ] 배포가 실패했다면 에러 메시지 확인

### 1.2 함수가 생성되었는지 확인
- [ ] Vercel 대시보드 → 프로젝트 → **Functions** 탭
- [ ] `api/webhook.py` 함수가 목록에 있는지 확인
- [ ] 함수 크기와 실행 시간 정보가 표시되는지 확인

---

## ✅ 2단계: 로그 위치 확인

### 2.1 Functions 탭에서 로그 확인
- [ ] Vercel 대시보드 → 프로젝트 → **Functions** 탭
- [ ] `api/webhook.py` 클릭
- [ ] **Logs** 탭 클릭
- [ ] 로그가 표시되는지 확인

### 2.2 Runtime Logs에서 확인
- [ ] Vercel 대시보드 → 프로젝트 → 상단 **"Logs"** 메뉴 클릭
- [ ] **Runtime Logs** 탭 확인
- [ ] 필터에서 `api/webhook` 선택
- [ ] 로그가 표시되는지 확인

### 2.3 Deployments 탭에서 확인
- [ ] Vercel 대시보드 → 프로젝트 → **Deployments** 탭
- [ ] 최신 배포 클릭
- [ ] **Functions** 섹션에서 `api/webhook` 클릭
- [ ] **Logs** 탭 확인

---

## ✅ 3단계: 함수 실행 확인

### 3.1 GET 요청으로 헬스체크
```bash
curl https://your-app.vercel.app/api/webhook
```

**확인 사항:**
- [ ] HTTP 200 응답이 오는지 확인
- [ ] 응답 본문에 `{"ok": true, "message": "Webhook endpoint is active"}` 가 있는지 확인
- [ ] 요청 후 Vercel 로그에 기록이 남는지 확인

### 3.2 브라우저에서 직접 접속
- [ ] 브라우저에서 `https://your-app.vercel.app/api/webhook` 접속
- [ ] JSON 응답이 표시되는지 확인
- [ ] 접속 후 로그 확인

---

## ✅ 4단계: 환경 변수 확인

### 4.1 환경 변수 설정 확인
- [ ] Vercel 대시보드 → 프로젝트 → **Settings** → **Environment Variables**
- [ ] `TELEGRAM_BOT_TOKEN` 존재 여부 확인
- [ ] `ALLOWED_CHAT_IDS` 존재 여부 확인
- [ ] 환경 변수 값이 올바른지 확인 (마스킹된 값이라도 존재하는지)

### 4.2 환경 변수 적용 확인
- [ ] 환경 변수 추가/수정 후 **재배포** 했는지 확인
- [ ] 환경 변수가 **"All Environments"** 또는 올바른 환경에 설정되어 있는지 확인

---

## ✅ 5단계: 함수 코드 확인

### 5.1 파일 위치 확인
- [ ] `api/webhook.py` 파일이 프로젝트 루트의 `api/` 폴더에 있는지 확인
- [ ] 파일명이 정확히 `webhook.py`인지 확인 (대소문자 구분)

### 5.2 핸들러 클래스 확인
- [ ] `api/webhook.py` 파일에 `handler` 클래스가 있는지 확인
- [ ] `handler` 클래스가 `BaseHTTPRequestHandler`를 상속하는지 확인

### 5.3 로깅 코드 확인
- [ ] 파일 상단에 `import logging`이 있는지 확인
- [ ] `logging.basicConfig()` 설정이 있는지 확인
- [ ] `logger.info()`, `logger.error()` 등의 로그 호출이 있는지 확인

---

## ✅ 6단계: Vercel 설정 확인

### 6.1 vercel.json 확인
- [ ] `vercel.json` 파일이 프로젝트 루트에 있는지 확인
- [ ] 파일 내용이 올바른 JSON 형식인지 확인
- [ ] 불필요한 설정이 없는지 확인

### 6.2 Python 런타임 확인
- [ ] Vercel이 Python 파일을 자동 감지하는지 확인
- [ ] `requirements.txt` 파일이 있는지 확인 (필요한 경우)

---

## ✅ 7단계: 실제 요청 테스트

### 7.1 텔레그램 봇으로 테스트
- [ ] 텔레그램 봇에 메시지 전송
- [ ] 봇이 응답하는지 확인
- [ ] 메시지 전송 후 Vercel 로그 확인

### 7.2 POST 요청으로 테스트
```bash
curl -X POST https://your-app.vercel.app/api/webhook \
  -H "Content-Type: application/json" \
  -d '{"update_id": 123}'
```

**확인 사항:**
- [ ] HTTP 200 응답이 오는지 확인
- [ ] 요청 후 로그에 기록이 남는지 확인

---

## ✅ 8단계: Vercel 계정/프로젝트 확인

### 8.1 올바른 프로젝트 확인
- [ ] Vercel 대시보드에서 올바른 프로젝트를 보고 있는지 확인
- [ ] GitHub 저장소가 올바르게 연결되어 있는지 확인

### 8.2 권한 확인
- [ ] Vercel 계정에 로그를 볼 수 있는 권한이 있는지 확인
- [ ] 팀 프로젝트인 경우 적절한 권한이 있는지 확인

---

## ✅ 9단계: 브라우저/캐시 확인

### 9.1 브라우저 새로고침
- [ ] Vercel 대시보드에서 **강력 새로고침** (Ctrl+Shift+R 또는 Cmd+Shift+R)
- [ ] 브라우저 캐시 삭제 후 다시 확인

### 9.2 다른 브라우저/기기에서 확인
- [ ] 다른 브라우저에서 Vercel 대시보드 접속
- [ ] 시크릿/프라이빗 모드에서 확인

---

## ✅ 10단계: 시간대/필터 확인

### 10.1 시간 필터 확인
- [ ] 로그 뷰어에서 시간 필터가 올바르게 설정되어 있는지 확인
- [ ] "Last 24 hours" 또는 적절한 시간 범위 선택
- [ ] 시간대가 올바른지 확인

### 10.2 로그 레벨 필터 확인
- [ ] 로그 필터에서 모든 레벨(INFO, WARNING, ERROR)이 선택되어 있는지 확인
- [ ] 특정 레벨만 필터링되어 있지 않은지 확인

---

## 🔍 문제 진단 가이드

### 시나리오 1: 배포는 성공했지만 로그가 전혀 안 보임
**가능한 원인:**
- 로그를 보는 위치가 잘못됨
- 함수가 실제로 실행되지 않음
- 로깅 코드가 실행되지 않음

**해결 방법:**
1. 위 체크리스트 1-3단계 다시 확인
2. GET 요청으로 함수 실행 확인
3. 함수가 실행되는지 확인

### 시나리오 2: 함수는 실행되지만 로그가 안 보임
**가능한 원인:**
- 로깅 설정 문제
- stderr/stdout 출력이 Vercel에 전달되지 않음
- 로그 레벨 필터링

**해결 방법:**
1. 위 체크리스트 5단계 확인
2. 간단한 `print()` 문 추가 테스트
3. 로그 레벨 필터 확인

### 시나리오 3: 일부 로그만 보임
**가능한 원인:**
- 로그 레벨 필터링
- 로그가 너무 많아서 일부만 표시
- 시간 범위 필터

**해결 방법:**
1. 로그 레벨 필터 확인
2. 시간 범위 확대
3. 특정 함수/시간대 필터 확인

---

## 📝 체크리스트 사용 방법

1. 위 체크리스트를 순서대로 확인
2. 각 항목을 체크하면서 문제 지점 찾기
3. 문제가 발견되면 해당 섹션의 해결 방법 시도
4. 여전히 해결되지 않으면 발견한 문제점을 기록하여 추가 도움 요청

---

## 🆘 최종 확인 사항

모든 체크리스트를 확인했는데도 로그가 안 보인다면:

1. **Vercel 지원팀에 문의**
   - 프로젝트 URL
   - 배포 ID
   - 확인한 체크리스트 항목들
   - 스크린샷

2. **로컬에서 테스트**
   ```bash
   vercel dev
   ```
   - 로컬에서 함수 실행
   - 로그가 출력되는지 확인

3. **최소한의 테스트 코드 작성**
   - 가장 간단한 로그만 출력하는 함수로 테스트
   - 점진적으로 복잡도 증가
